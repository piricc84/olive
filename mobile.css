:root{
  --safe-top: env(safe-area-inset-top, 0px);
  --safe-bottom: env(safe-area-inset-bottom, 0px);
}

body{
  padding-top: var(--safe-top);
  padding-bottom: var(--safe-bottom);
  -webkit-text-size-adjust: 100%;
}

button, input, select, textarea{
  min-height: 44px;
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
}

.toast{ bottom: calc(18px + var(--safe-bottom)); }

.fab{
  position: fixed;
  right: 18px;
  bottom: calc(18px + var(--safe-bottom));
  width: 58px;
  height: 58px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.12);
  background: linear-gradient(135deg, rgba(107,178,142,.22), rgba(127,181,255,.16));
  color: var(--text);
  display: none;
  align-items: center;
  justify-content: center;
  font-size: 26px;
  box-shadow: var(--shadow);
  cursor: pointer;
  z-index: 9996;
}

.fab-menu{
  position: fixed;
  right: 18px;
  bottom: calc(84px + var(--safe-bottom));
  display: flex;
  flex-direction: column;
  gap: 10px;
  padding: 10px;
  border-radius: 18px;
  background: rgba(17,24,39,.95);
  border: 1px solid rgba(255,255,255,.10);
  box-shadow: var(--shadow);
  opacity: 0;
  transform: translateY(8px);
  pointer-events: none;
  transition: opacity .18s ease, transform .18s ease;
  z-index: 9996;
}
.fab-menu .btn{width:100%; text-align:left;}
.fab-menu.open{opacity:1; transform:translateY(0); pointer-events:auto;}

body.sidebar-open{overflow:hidden;}
body.sidebar-open::after{
  content:"";
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.48);
  z-index: 9995;
  transition: opacity .18s ease;
}

@media (max-width: 980px){
  .sidebar{
    top: 0;
    padding-top: calc(18px + var(--safe-top));
    max-height: calc(100vh - var(--safe-top));
    z-index: 9997;
  }
  .main{padding: 18px 16px calc(90px + var(--safe-bottom)) 16px;}
  .fab{display:flex;}
}

@media (max-width: 720px){
  .topbar{flex-wrap: wrap; gap:10px;}
  .topbar .left{width:100%;}
  .search{width:100%; min-width:0;}
  .actions{width:100%; justify-content:space-between;}
  .actions .btn{flex:1; text-align:center;}
}
